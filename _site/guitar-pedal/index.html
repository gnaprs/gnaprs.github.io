<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>Making a guitar pedal &#8211; Marion Pang</title> <meta name="description" content="Marion's personal website in the making."> <meta name="keywords" content="music, guitar, electronics, engineering"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://gnaprs.github.io/assets/img/marion_circle.png"> <meta name="twitter:title" content="Making a guitar pedal"> <meta name="twitter:description" content="Guitar pedals are great. Really."> <meta name="twitter:site" content="@srpang"> <meta name="twitter:creator" content="@srpang"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Making a guitar pedal"> <meta property="og:description" content="Guitar pedals are great. Really."> <meta property="og:url" content="https://gnaprs.github.io/guitar-pedal/"> <meta property="og:site_name" content="Marion Pang"> <meta property="og:image" content="https://gnaprs.github.io/assets/img/marion_circle.png"> <link rel="canonical" href="https://gnaprs.github.io/guitar-pedal/"> <link href="https://gnaprs.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Marion Pang Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://gnaprs.github.io/assets/css/main.css"> <!-- JS --> <script src="https://gnaprs.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://gnaprs.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://gnaprs.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://gnaprs.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://gnaprs.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://gnaprs.github.io/favicon.png" /> <link rel="shortcut icon" href="https://gnaprs.github.io/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(https://gnaprs.github.io/assets/img/placeholder_big_compress.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://gnaprs.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://gnaprs.github.io/assets/img/marion_circle.png" alt="Marion Pang photo" class="author-photo"> <h4>Marion Pang</h4> <p>Marion's personal website in the making.</p> </li> <li><a href="https://gnaprs.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:sr_pang@hotmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://twitter.com/srpang" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://facebook.com/mpangwr" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://linkedin.com/in/marionpang" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/gnaprs" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://steamcommunity.com/id/srpang" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-steam-square"></i> Steam</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://gnaprs.github.io/posts/">All Posts</a></li> <li><a href="https://gnaprs.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="https://gnaprs.github.io/projects/" >Projects</a></li> <li><a href="https://github.com/gnaprs" target="_blank" rel="noopener noreferrer">Github</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>Making a guitar pedal</h1> <h4>10 Apr 2019</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~7 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://gnaprs.github.io/projects/"> <i class="fa fa-chevron-left"></i> </a> </div> <p class="notice">Here’s a quick project that a couple of friends and I worked on for our Electronics &amp; Instrumentation class. Our focus was on the engineering of the circuitry - with a nifty little application to one of my favourite hobbies. Enjoy! <br /> Credit: Afareen Jaleel, Annika Torp, Ruby Liu, Yeonwoo Lee, <b>Marion Pang<b></b></b></p> <h1 id="the-banshee">The Banshee</h1> <p>The Fuzz Face is an iconic guitar pedal used by famous guitarists such as Jimi Hendrix. However, fuzz effects clip off the lower spectrum of frequencies, leading to a shallow tone. In this project, we would like to recreate the fuzzy sound produced by the pedal while maintaining the full tone of an electric guitar. To create the fuzz effect, we use a simple combination of 2 transistors, and several different resistors and capacitors. The circuit designed combines initial soft clipping with asymmetrical clipping that changes toward symmetrical clipping under drive, resulting in the classic fuzz. We combine the fuzz circuit with a low pass filter and add the signals in a non-inverting summation amplifier. As a result, we are able to achieve the fuzz effect with bass boost.</p> <p>The device is named “Banshee”, which refers to a female spirit whose shrieking signals that someone is about to die. This device shares a great similarity with a banshee, as you can hear it shrieking whenever it is unhappy with controlling of the dials. Like a banshee, its shrieking is unpredictable and the source of this “ability” is unknown.</p> <figure class="half"> <img src="https://gnaprs.github.io/assets/img/projects/pedal/intro2.png" /> <img src="https://gnaprs.github.io/assets/img/projects/pedal/intro1.png" /> <figcaption>The Banshee.</figcaption> </figure> <p>The device is operated using three potentiometer dials and a latching DPDT push button. To switch between a clean tone (without effects) and the fuzz effect, press the button once. The leftmost dial controls the cutoff frequency of the low-pass filter, or the range of low frequency sound waves that will be included in the final output sound. The center dial controls the level of “fuzziness” of the output. The rightmost dial controls the volume of the output. The input audio is connected using the 1/4” jack on the left side. The output audio comes from the 1/4” jack on the right side, which can be connected to a speaker.</p> <h2 id="internal-operation-of-device-and-circuit-design">Internal Operation of Device and Circuit Design</h2> <figure> <img src="https://gnaprs.github.io/assets/img/projects/pedal/circuitdrawing.png" /> <figcaption>Circuit drawing of guitar pedal.</figcaption> </figure> <p>The device consists of 3 electrical circuits – the fuzz effect, a low-pass filter and the non-inverting summing amplifier. The choice between a clean tone or the fuzz effect is controlled by the DPDT switch.</p> <blockquote> <p>Deviations from circuit drawing: 200k pot replaced by 176k pot. Two 10 μF capacitors in parallel (fuzz effect) instead of one 22 μF capacitor.</p> </blockquote> <h3 id="dpdt-switch">DPDT switch</h3> <figure> <img src="https://gnaprs.github.io/assets/img/projects/pedal/dpdt.png" /> <figcaption>Circuitry of DPDT switch.</figcaption> </figure> <p>If the DPDT switch is on, the input signal is sent to the fuzz effect section and the low-pass section. In the above circuit diagram, the switch is on. Switching it off will connect the input and output directly, bypassing the circuits.</p> <h3 id="low-pass-filter">Low-pass filter</h3> <p>The low-pass filter consists of a 2.5 kΩ potentiometer and a 1 \( \mu \)F capacitor. Since the cutoff frequency is \( \frac{1}{RC} \), where \( R \) is the resistance of the potentiometer, and \( C \) is the capacitance of the capacitor, the circuit filters out signals above 400 Hz when the potentiometer is at maximum resistance. Turning the resistance to zero can turn off the filtering entirely.</p> <h3 id="summing-amplifier">Summing amplifier</h3> <p>We used a non-inverting summing operational amplifier to sum the fuzz circuit output with the low-frequency input so that the final output from the circuit would still have the low-frequency sound waves with the fuzzed effects on the higher frequency sound waves.</p> <h2 id="circuit-design-and-choice-of-resistorcapacitor-values">Circuit Design and choice of resistor/capacitor values</h2> <h3 id="non-inverting-summation-operational-amplifier">Non-inverting summation operational amplifier</h3> <figure> <img src="https://gnaprs.github.io/assets/img/projects/pedal/opamp.png" /> <figcaption>Non-inverting summation operational amplifier.</figcaption> </figure> <p>The summing amplifier adds the signal from the fuzz effects section and the low-pass filter. That is, \( V_{out} = V_{fuzz} + V_{low} \). Using op-amp analysis, we obtain \[ V_{out}=(1+\frac{R_{f2}}{R_{f1}})(V_1 \cdot \frac{R_2}{R_1+R_2}+V_2\cdot\frac{R_1}{R_1+R_2}) \]</p> <p>In our circuit, we chose 500Ω resistors to obtain \[V_{out}=(1+1)(V_1\cdot\frac{1}{2} + V_2\cdot\frac{1}{2})=V_1+V2 \]</p> <h3 id="fuzz-circuit">Fuzz circuit</h3> <p>The fuzz circuit consists of 3 main parts: 2 amplifiers (input stage, output stage) and stabilising voltage feedback biasing network.</p> <figure> <img src="https://gnaprs.github.io/assets/img/projects/pedal/fuzz.png" /> <figcaption>Fuzz circuit.</figcaption> </figure> <h4 id="amplifiers">Amplifiers</h4> <p>The input stage essentially acts as a PNP amplifier (voltage follower), where the collector resistor follows the amplified voltage of the input. The amplifier provides a high voltage gain with low input impedance and high output impedance. A 100nF capacitor is added to the circuit to remove hum and protect the pedal against dangerous DC levels. Specifically, with a 100nF capacitor and 100kΩ resistor, the voltage gain of the input stage can be calculated to be</p> <p>\[A_V = -g_{transistor} \cdot R_c = -g_{transistor}\cdot I_e / V_T \approx 290 \]</p> <p>Similarly, the output stage is also a PNP emitter amplifier, which controls the emitter current of the voltage follower input circuit. The gain of the output stage can be calculated by the ratio of the volume pot over the total AC load, thus allowing an increase in amplitude as the pot is turned up. The emitter resistance \(R_{output}\) can be controlled by the fuzz pot to control the level of asymmetrical clipping. With the pot turned up, \(R_{output}\) is high, resulting in clipping at lower frequencies. \[\omega_{cutoff} = \frac{I}{RC}\] Thus, the “fuzzy” sound is more pronounced.</p> <h4 id="voltage-feedback-biasing-circuit">Voltage feedback biasing circuit</h4> <p>The feedback network consists of two resistors (emitter followers) and a transistor, arrange in the form of a voltage feedback biasing circuit. The voltage feedback biasing circuit serves the purpose of stabilising the gain from both input and output stages, making the gain less sensitive to temperature changes of transistors and reducing nonlinear distortion. When the fuzz pot is set to minimum, a large amount of signal is sent back to input in negative feedback, reducing total pedal gain. When the fuzz pot is set to maximum, the 22uF capacitor draws current to ground, increasing total pedal gain.</p> <p>Combining the 2 input and output stages with the voltage feedback circuit, we can calculate for the total gain in the fuzz circuit:</p> <p>\[ A_V = \frac{R_C}{R_E}=\frac{R_{input}+R_{output}}{R_{output pot}}\]</p> <p>With values \(R_{input}=100k\Omega\),\(R_{output,max}=20k\Omega\), we have \[A_{V,max} = \frac{100k+20k}{20k}=6\]</p> <h3 id="low-pass-filter-1">Low Pass Filter</h3> <figure> <img src="https://gnaprs.github.io/assets/img/projects/pedal/lpf.png" /> <figcaption>Circuit of the low pass filter.</figcaption> </figure> <p>Since the sound distortion of the fuzz circuit acted on higher frequencies, we added a second parallel branch with a low pass filter to pass the low frequency audio signals. The lowest frequency of sound waves humans can hear is usually around 20 Hz but can be as low as 12 Hz. We used a 1 μF capacitor and 2.5 kΩ potentiometer so the minimum cutoff frequency of the RC filter is \(\frac{1}{RC}=6.37\cdot10^{-11} Hz\), and the user can adjust the potentiometer to allow a higher cutoff frequency (maximum cutoff frequency is when the resistor has the lowest resistance, and since the potentiometer resistance can be adjusted to approach 0Ω so that the cutoff frequency \(\frac{1}{RC}\) approaches \(\infty\).</p> <p>\[\lim_{R\rightarrow 0} \frac{1}{RC}=\infty \]</p> <p>Since a low pass filter allows frequencies lower than the cutoff frequency to pass through, when the potentiometer is set to maximum resistance, the cutoff frequency is lowest, so the range of frequencies allowed to pass through is small (and would only include frequencies that are inaudible to humans), so essentially no low frequency waves would be passed to the op-amp and only the output from the fuzz circuit would be heard. When the potentiometer is set to minimum resistance, the cutoff frequency is highest, so the range of frequencies allowed to pass through is largest (basically all frequencies can pass through), so essentially all waves would be passed to the op-amp and the output would be the sum of the output from the fuzz circuit with the original input audio. Thus, the user can adjust the potentiometer to decide what the maximum frequency of sound waves from the original audio should be summed with the fuzz circuit output.</p> <figure> <img src="https://gnaprs.github.io/assets/img/projects/pedal/lpfgain.png" /> <figcaption>RC filter gain against frequency when passed through low pass filter.</figcaption> </figure> <h2 id="conclusion">Conclusion</h2> <p>The Fuzz Face circuit consists of simple components such as capacitors, resistors and transistors. To fully understand how the Fuzz Face works, it takes more than knowing how each component operate, since different circuit components affect each other, and a series of events occur in the circuit to create the fuzzy sound. Therefore, it is important to understand how each component operate as well as their role within the circuit and how they work together. In this project, the conventional Fuzz Face circuit was modified to improve on its limitation of eliminating lower frequencies, thus the bass of songs. Addition of a lower pass filter segregate out the lower frequencies (bass) and the summing amplifier combines the output from the Fuzz Face circuit and the filter to create bass boosted, fuzzy sound. Also, the resistance and capacitance values for the low pass filter and summing amplifier were chosen through trials and troubleshooting, to create the sound effect that we wanted. In conclusion, we have successfully incorporated the low pass filter and summing amplifier to the Fuzz Face to create the fuzzy sound without compromising the bass of the song in this project.</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://gnaprs.github.io/tags/#music" title="Pages tagged music" class="tag"><span class="term">music</span></a><a href="https://gnaprs.github.io/tags/#guitar" title="Pages tagged guitar" class="tag"><span class="term">guitar</span></a><a href="https://gnaprs.github.io/tags/#electronics" title="Pages tagged electronics" class="tag"><span class="term">electronics</span></a><a href="https://gnaprs.github.io/tags/#engineering" title="Pages tagged engineering" class="tag"><span class="term">engineering</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://gnaprs.github.io/guitar-pedal/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://gnaprs.github.io/guitar-pedal/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://gnaprs.github.io/guitar-pedal/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://gnaprs.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="https://gnaprs.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="https://gnaprs.github.io/assets/js/jquery.goup.min.js"></script> <script src="https://gnaprs.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://gnaprs.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="https://gnaprs.github.io/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'gnaprs'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
