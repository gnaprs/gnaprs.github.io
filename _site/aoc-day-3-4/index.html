<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>Advent of Code 2020 (Day 3&4) &#8211; Marion Pang</title> <meta name="description" content="Marion's personal website in the making."> <meta name="keywords" content="coding, fun"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="http://127.0.0.1:4000//assets/img/posts/aoc2020/aoc2020_cropped.jpeg"> <meta name="twitter:title" content="Advent of Code 2020 (Day 3&4)"> <meta name="twitter:description" content=" slopy slopes. did someone say regex? "> <meta name="twitter:site" content="@srpang"> <meta name="twitter:creator" content="@srpang"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Advent of Code 2020 (Day 3&4)"> <meta property="og:description" content=" slopy slopes. did someone say regex? "> <meta property="og:url" content="http://127.0.0.1:4000/aoc-day-3-4/"> <meta property="og:site_name" content="Marion Pang"> <meta property="og:image" content="http://127.0.0.1:4000/assets/img/marion_circle.png"> <link rel="canonical" href="http://127.0.0.1:4000/aoc-day-3-4/"> <link href="http://127.0.0.1:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Marion Pang Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://127.0.0.1:4000/assets/css/main.css"> <!-- JS --> <script src="http://127.0.0.1:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://127.0.0.1:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://127.0.0.1:4000/favicon.png" /> <link rel="shortcut icon" href="http://127.0.0.1:4000/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(http://127.0.0.1:4000/assets/img/placeholder_big_compress.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <style type="text/css">.feature {background-image:url(http://127.0.0.1:4000//assets/img/posts/aoc2020/aoc2020_cropped.jpeg);}</style> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://127.0.0.1:4000/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://127.0.0.1:4000/assets/img/marion_circle.png" alt="Marion Pang photo" class="author-photo"> <h4>Marion Pang</h4> <p>Marion's personal website in the making.</p> </li> <li><a href="http://127.0.0.1:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:sr_pang@hotmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="http://twitter.com/srpang" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://facebook.com/mpangwr" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://linkedin.com/in/marionpang" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/gnaprs" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://steamcommunity.com/id/srpang" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-steam-square"></i> Steam</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="http://127.0.0.1:4000/posts/">All Posts</a></li> <li><a href="http://127.0.0.1:4000/tags/">All Tags</a></li> </ul> </li> <li><a href="http://127.0.0.1:4000/projects/" >Projects</a></li> <li><a href="https://github.com/gnaprs" target="_blank" rel="noopener noreferrer">Github</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title feature "> <h1>Advent of Code 2020 (Day 3&4)</h1> <h4>04 Dec 2020</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~9 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="http://127.0.0.1:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="day-3">Day 3</h1> <p><a href="https://adventofcode.com/2020/day/3"><b>Toboggan Trajectory</b></a></p> <p>Anddd we’re off! This time, we’re travelling down the slope at a certain angle, but need to account for the trees in our path. We’re given a map showing open squares (<code class="highlighter-rouge">.</code>) and trees (<code class="highlighter-rouge">#</code>), as such:</p> <div class="highlighter-rouge"><pre class="highlight"><code>    ..##.......
    #...#...#..
    .#....#..#.
    ..#.#...#.#
    .#...##..#.
    ..#.##.....
    .#.#.#....#
    .#........#
    #.##...#...
    #...##....#
    .#..#...#.#
</code></pre></div> <p>Of course, it’s a magical island, with infinite width - having the same pattern repeating multiple times.</p> <div class="highlighter-rouge"><pre class="highlight"><code>    ..##.........##.........##.........##.........##.........##.......  ---&gt;
    #...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..
    .#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.
    ..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#
    .#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.
    ..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....  ---&gt;
    .#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#
    .#........#.#........#.#........#.#........#.#........#.#........#
    #.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...
    #...##....##...##....##...##....##...##....##...##....##...##....#
    .#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#  ---&gt;
</code></pre></div> <p>Our task is to slide down the slope and count the number of trees we encounter along the way! But first, we import the data from our file:</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># import data</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

<span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="c"># print first 3 lines</span>
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>['...#.....#.......##......#.....',
 '...#..................#........',
 '....##....#.......#............']
</code></pre></div> <h2 id="part-1">Part 1</h2> <center class="notice">The toboggan can only follow a few specific slopes; count all the trees you would encounter for the slope **right 3, down 1**.</center> <p>Righty, seems easy enough! We just need to keep track of our position and move 3 times to the right each line - if we hit the end of the file, we can “wrap around” this magic island by using a modulus (<code class="highlighter-rouge">%</code>) to make the remainder our “wrapped around” position.</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">position</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">==</span> <span class="s">"#"</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="c"># wrap around if we hit the end of the line</span>
    <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span><span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    
<span class="k">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> 
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>220
</code></pre></div> <p>We simply count the number of trees we encounter and get our answer!</p> <p>Ans: <code class="highlighter-rouge">220</code></p> <h2 id="part-2">Part 2</h2> <p><em>Time to check the rest of the slopes - you need to minimize the probability of a sudden arboreal stop, after all.</em></p> <center class="notice">Tl;dr Count the number of trees per given slope, and find the product of them.</center> <ul> <li>Right 1, down 1.</li> <li>Right 3, down 1. (This is the slope that we just checked.)</li> <li>Right 5, down 1.</li> <li>Right 7, down 1.</li> <li>Right 1, down 2.</li> </ul> <p>Alrighty! Most of the slopes are trivial (i.e. adding 1/5/7 to our position instead of 3), but the last slope is a little more interesting. With a slope of 1 right and 2 down, we need to <strong>skip alternating lines</strong>. That’s not bad though - we can just add a line of code to select the <code class="highlighter-rouge">n</code>th alternating lines per <code class="highlighter-rouge">n</code> down, as such:</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">checkSlope</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">down</span><span class="p">):</span>
    <span class="c"># selects every line if down 1, selects alternating nth line for down = n</span>
    <span class="n">arr_selected</span><span class="o">=</span><span class="n">arr</span><span class="p">[::</span><span class="n">down</span><span class="p">]</span>
    <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">arr_selected</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">==</span> <span class="s">"#"</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c"># wrap around if we hit the end of the line</span>
        <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span> <span class="o">+</span> <span class="n">right</span><span class="p">)</span><span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">count</span>
</code></pre></div> <p>With that done, we just need to run our function per given slope, to get our answer!</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">slopes</span><span class="o">=</span><span class="p">[[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>

<span class="n">prod</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">slope</span> <span class="ow">in</span> <span class="n">slopes</span><span class="p">:</span>
    <span class="n">treeNum</span> <span class="o">=</span> <span class="n">checkSlope</span><span class="p">(</span><span class="n">slope</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">slope</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Right: "</span><span class="p">,</span> <span class="n">slope</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">"Down: "</span><span class="p">,</span> <span class="n">slope</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">"Trees: "</span><span class="p">,</span> <span class="n">treeNum</span><span class="p">)</span>
    <span class="n">prod</span> <span class="o">*=</span><span class="n">treeNum</span>   

<span class="k">print</span><span class="p">(</span><span class="s">"Ans:"</span><span class="p">,</span> <span class="n">prod</span><span class="p">)</span>
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>Right:  3 Down:  1 Trees:  220
Right:  1 Down:  1 Trees:  70
Right:  5 Down:  1 Trees:  63
Right:  7 Down:  1 Trees:  76
Right:  1 Down:  2 Trees:  29
Ans: 2138320800
</code></pre></div> <h1 id="day-4">Day 4</h1> <p><a href="https://adventofcode.com/2020/day/4"><b>Passport Processing</b></a></p> <p>Ooooo this one is interesting. We arrive at the airport and (as per usual) we’re needed for some help with the long lines at the passport scanners! (Okay, but ngl I’m getting throwback to those 3h long lines at TSA and… <em>shudders</em>). The automatic passport scanners are slow because they’re having trouble detecting which passports have all required fields. The expected fields are as follows:</p> <ul> <li><code class="highlighter-rouge">byr</code> (Birth Year)</li> <li><code class="highlighter-rouge">iyr</code> (Issue Year)</li> <li><code class="highlighter-rouge">eyr</code> (Expiration Year)</li> <li><code class="highlighter-rouge">hgt</code> (Height)</li> <li><code class="highlighter-rouge">hcl</code> (Hair Color)</li> <li><code class="highlighter-rouge">ecl</code> (Eye Color)</li> <li><code class="highlighter-rouge">pid</code> (Passport ID)</li> <li><code class="highlighter-rouge">cid</code> (Country ID)</li> </ul> <p>Passport data is validated in batch files (your puzzle input). Each passport is represented as a sequence of <code class="highlighter-rouge">key:value</code> pairs separated by spaces or newlines. Passports are separated by blank lines. For example, in our input file, we have our first 3 entries:</p> <div class="highlighter-rouge"><pre class="highlight"><code>eyr:2033
hgt:177cm pid:173cm
ecl:utc byr:2029 hcl:#efcc98 iyr:2023

pid:337605855 cid:249 byr:1952 hgt:155cm
ecl:grn iyr:2017 eyr:2026 hcl:#866857

cid:242 iyr:2011 pid:953198122 eyr:2029 ecl:blu hcl:#888785
</code></pre></div> <p>Alrighty, let’s import these data! This was a little bit more convoluted than our import from our previous days - I used a couple of split operations to create a dictionary of <code class="highlighter-rouge">key:value</code> pairs per passport, and threw that into our best friend, a dataframe.</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span> 
<span class="kn">import</span> <span class="nn">re</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c"># import data</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">curDict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">file</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span> <span class="ow">or</span> <span class="n">line</span> <span class="o">==</span> <span class="s">""</span><span class="p">:</span>
            <span class="c"># new entry! add data to array and create empty dictionary</span>
            <span class="n">arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curDict</span><span class="p">)</span>
            <span class="n">curDict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># parse input into tuples and add into dictionary</span>
            <span class="n">tuples</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">' '</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tuples</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">':'</span><span class="p">)</span>
                <span class="n">curDict</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">=</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c"># Creates DataFrame. </span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> 
<span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>eyr</th> <th>hgt</th> <th>pid</th> <th>ecl</th> <th>byr</th> <th>hcl</th> <th>iyr</th> <th>cid</th> </tr> </thead> <tbody> <tr> <th>284</th> <td>2039</td> <td>72cm</td> <td>#d80d30</td> <td>#cc4aff</td> <td>2025</td> <td>5307c9</td> <td>2025</td> <td>224</td> </tr> <tr> <th>285</th> <td>2027</td> <td>184</td> <td>58151347</td> <td>NaN</td> <td>2015</td> <td>98fb9d</td> <td>2029</td> <td>NaN</td> </tr> <tr> <th>286</th> <td>2021</td> <td>183cm</td> <td>164cm</td> <td>xry</td> <td>2019</td> <td>#18171d</td> <td>2013</td> <td>187</td> </tr> </tbody> </table> </div> <h2 id="part-1-1">Part 1</h2> <p>Our first task is to check for the validity of passports. Specifically, those that have all required fields. We are to treat <code class="highlighter-rouge">cid</code> as optional, but all other fields are necessary. In our batch file, how many passports are valid?</p> <center class="notice">Passports are valid if they contain all fields except the country ID. Count all valid passports.</center> <p>Thanks to the format of our data management from before, this is easy. We simply check for any rows that have null fields (ignoring the <code class="highlighter-rouge">cid</code> field). And thus, we have:</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">'valid_p1'</span><span class="p">]</span><span class="o">=~</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">'cid'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="nb">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'valid_p1'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>True     219
False     68
Name: valid_p1, dtype: int64
</code></pre></div> <p>Ans: <code class="highlighter-rouge">219</code></p> <h2 id="part-2-1">Part 2</h2> <p><em>The line is moving more quickly now, but you overhear airport security talking about how passports with invalid data are getting through. Better add some data validation, quick!</em></p> <center class="notice">Tl;dr caught doing lazy validation, time to fix our mistakes! We now have stricter rules for each field.</center> <ul> <li><code class="highlighter-rouge">byr</code> (Birth Year) - four digits; at least 1920 and at most 2002.</li> <li><code class="highlighter-rouge">iyr</code> (Issue Year) - four digits; at least 2010 and at most 2020.</li> <li><code class="highlighter-rouge">eyr</code> (Expiration Year) - four digits; at least 2020 and at most 2030.</li> <li><code class="highlighter-rouge">hgt</code> (Height) - a number followed by either cm or in: <ul> <li>If cm, the number must be at least 150 and at most 193.</li> <li>If in, the number must be at least 59 and at most 76.</li> </ul> </li> <li><code class="highlighter-rouge">hcl</code> (Hair Color) - a # followed by exactly six characters 0-9 or a-f.</li> <li><code class="highlighter-rouge">ecl</code> (Eye Color) - exactly one of: amb blu brn gry grn hzl oth.</li> <li><code class="highlighter-rouge">pid</code> (Passport ID) - a nine-digit number, including leading zeroes.</li> <li><code class="highlighter-rouge">cid</code> (Country ID) - ignored, missing or not.</li> </ul> <p>That’s more like it! For each field, we now have a specific format we want to match - sounds like a task perfect for RegEx.</p> <blockquote> <p>A RegEx, or Regular Expression, is a sequence of characters that forms a search pattern. RegEx can be used to check if a string contains the specified search pattern.</p> </blockquote> <p>Here are some examples of how to use RegEx from the w3schools page:</p> <table rules="groups"> <thead> <tr> <th>Character</th> <th>Description</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td>[]</td> <td>A set of characters</td> <td>“[a-m]”</td> </tr> <tr> <td>\</td> <td>Signals a special sequence (can also be used to escape special characters)</td> <td>“\d”</td> </tr> <tr> <td>.</td> <td>Any character (except newline character)</td> <td>“he..o”</td> </tr> <tr> <td>^</td> <td>Starts with</td> <td>“^hello”</td> </tr> <tr> <td>$</td> <td>Ends with</td> <td>“world$”</td> </tr> <tr> <td>*</td> <td>Zero or more occurrences</td> <td>“aix*”</td> </tr> <tr> <td>+</td> <td>One or more occurrences</td> <td>“aix+”</td> </tr> <tr> <td>{}</td> <td>Exactly the specified number of occurrences</td> <td>“al{2}”</td> </tr> <tr> <td>|</td> <td>Either or</td> <td>“falls|stays”</td> </tr> </tbody> </table> <p>Alrighty, let’s get right into it! We can start with the easier fields, like <code class="highlighter-rouge">byr</code>. We need <code class="highlighter-rouge">byr</code> to be a string that comprises of 4 digits and is between 1920 and 2002.</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># byr (Birth Year) - four digits; at least 1920 and at most 2002.</span>
<span class="n">byr_valid</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"(19[2-9][0-9]|200[0-2])"</span><span class="p">,</span> <span class="n">byr</span><span class="p">)</span>
</code></pre></div> <p>Let me break down the above pattern: the first half (before <code class="highlighter-rouge">|</code>) asks RegEx to match the format <code class="highlighter-rouge">19(any digit between 2 and 9)(any digit between 0 and 9)</code>, i.e. any number between 1920 and 1999. The second half does the same thing, but for 2000-2002!</p> <p>Even the more complicated looking fields like <code class="highlighter-rouge">hgt</code> aren’t too bad - we just need to add more “either” fields using <code class="highlighter-rouge">|</code>!</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># byr (Birth Year) - four digits; at least 1920 and at most 2002.</span>
<span class="n">hgt_valid</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"(1[5-8][0-9]cm|19[0-3]cm|59in|6[0-9]in|7[0-6]in)"</span><span class="p">,</span> <span class="n">byr</span><span class="p">)</span>
</code></pre></div> <p>Here, we’re checking if the height falls between 150-189cm, <em>or</em> 190-193cm, <em>or</em> 59in, <em>or</em> 60-69in, <em>or</em> 70-76in. Not too bad once we get used to it!</p> <p>The hardest field to check is the <code class="highlighter-rouge">pid</code> field - here, we want to make sure the field is a nine-digit number, including leading zeroes.</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="c"># pid (Passport ID) - a nine-digit number, including leading zeroes.</span>
<span class="n">pid_valid</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"^</span><span class="err">\</span><span class="s">d{9}$"</span><span class="p">,</span> <span class="n">pid</span><span class="p">))</span>
</code></pre></div> <p>The <code class="highlighter-rouge">^</code> operator signifies that the field has to start with the following expression, <code class="highlighter-rouge">\d</code> is a special sequence that returns only digits (the equivalent of <code class="highlighter-rouge">[0-9]</code>), <code class="highlighter-rouge"><span class="p">{</span><span class="err">9</span><span class="p">}</span></code> specifies 9 (digits), and the <code class="highlighter-rouge">$</code> “end with” metacharacter matches the EOL character <code class="highlighter-rouge">\n</code>. This metacharacter is especially important to make sure the pattern ends with those 9 digits and nothing more - otherwise, we’ll end up accepting 10 digit PIDs!</p> <p>Whew! With that all done, we can finish up our little passport validity function and output our answer.</p> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">isPassportValid</span><span class="p">(</span><span class="n">eyr</span><span class="p">,</span><span class="n">hgt</span><span class="p">,</span><span class="n">pid</span><span class="p">,</span><span class="n">ecl</span><span class="p">,</span><span class="n">byr</span><span class="p">,</span><span class="n">hcl</span><span class="p">,</span><span class="n">iyr</span><span class="p">):</span>
    <span class="n">validity</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">eyr</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">hgt</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">ecl</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">byr</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">hcl</span><span class="p">)</span> <span class="ow">or</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">iyr</span><span class="p">)):</span>
        <span class="n">passport_valid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c"># byr (Birth Year) - four digits; at least 1920 and at most 2002.</span>
        <span class="n">passport_valid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"(19[2-9][0-9]|200[0-2])"</span><span class="p">,</span> <span class="n">byr</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># iyr (Issue Year) - four digits; at least 2010 and at most 2020.</span>
        <span class="n">passport_valid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"(201[0-9]|2020)"</span><span class="p">,</span> <span class="n">iyr</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># eyr (Expiration Year) - four digits; at least 2020 and at most 2030.</span>
        <span class="n">passport_valid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"(202[0-9]|2030)"</span><span class="p">,</span> <span class="n">eyr</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># hgt (Height) - a number followed by either cm or in:</span>
            <span class="c"># If cm, the number must be at least 150 and at most 193.</span>
            <span class="c"># If in, the number must be at least 59 and at most 76.</span>
        <span class="n">passport_valid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"(1[5-8][0-9]cm|19[0-3]cm|59in|6[0-9]in|7[0-6]in)"</span><span class="p">,</span> <span class="n">hgt</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># hcl (Hair Color) - a # followed by exactly six characters 0-9 or a-f.</span>
        <span class="n">passport_valid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"^#[a-f0-9]{6}"</span><span class="p">,</span> <span class="n">hcl</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># ecl (Eye Color) - exactly one of: amb blu brn gry grn hzl oth.</span>
        <span class="n">passport_valid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"(amb|blu|brn|gry|grn|hzl|oth)"</span><span class="p">,</span> <span class="n">ecl</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># pid (Passport ID) - a nine-digit number, including leading zeroes.</span>
        <span class="n">passport_valid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">"^</span><span class="err">\</span><span class="s">d{9}$"</span><span class="p">,</span> <span class="n">pid</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">validity</span> <span class="o">=</span> <span class="ow">not</span><span class="p">(</span><span class="bp">False</span> <span class="ow">in</span> <span class="n">passport_valid</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">validity</span>
</code></pre></div> <div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">'valid_p2'</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">isPassportValid</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s">'eyr'</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s">'hgt'</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s">'pid'</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s">'ecl'</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s">'byr'</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s">'hcl'</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s">'iyr'</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'valid_p2'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>False    160
True     127
Name: valid_p2, dtype: int64
</code></pre></div> <p>Since I was new to RegEx, I had trouble debugging this one, and using <a href="https://regex101.com/">this</a> RegEx debugging tool (<strong>highly recommended!!!</strong>) helped me to figure out exactly what was wrong. It’s a really useful tool that I’ll be sure to use in the future - very very cool!</p> <blockquote> <p>Thoughts after day 3 &amp; 4: mhmmm text parsing, not too hot. but also, a newfound love for regex!</p> </blockquote> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://127.0.0.1:4000/tags/#coding" title="Pages tagged coding" class="tag"><span class="term">coding</span></a><a href="http://127.0.0.1:4000/tags/#fun" title="Pages tagged fun" class="tag"><span class="term">fun</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://127.0.0.1:4000/aoc-day-3-4/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=http://127.0.0.1:4000/aoc-day-3-4/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://127.0.0.1:4000/aoc-day-3-4/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="http://127.0.0.1:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.goup.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://127.0.0.1:4000/assets/js/scripts.js"></script> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
